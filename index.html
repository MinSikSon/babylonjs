<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Babylon.js Solar System</title>
  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      overflow: hidden;
    }
    #renderCanvas {
      width: 100%;
      height: 100%;
      touch-action: none;
    }
  </style>
</head>
<body>
<canvas id="renderCanvas"></canvas>

<!-- Babylon.js CDN -->
<script src="https://cdn.babylonjs.com/babylon.js"></script>

<script>
const canvas = document.getElementById("renderCanvas");
const engine = new BABYLON.Engine(canvas, true);

const createScene = () => {
  const scene = new BABYLON.Scene(engine);
  scene.clearColor = new BABYLON.Color4(0, 0, 0, 1);

  /* 카메라 */
  const camera = new BABYLON.ArcRotateCamera(
    "camera",
    BABYLON.Tools.ToRadians(45),
    BABYLON.Tools.ToRadians(60),
    40,
    BABYLON.Vector3.Zero(),
    scene
  );
  camera.attachControl(canvas, true);

  /* 빛 (태양광) */
  const light = new BABYLON.PointLight(
    "sunLight",
    BABYLON.Vector3.Zero(),
    scene
  );
  light.intensity = 2;

  /* 태양 */
  const sun = BABYLON.MeshBuilder.CreateSphere(
    "sun",
    { diameter: 6 },
    scene
  );
  const sunMat = new BABYLON.StandardMaterial("sunMat", scene);
  sunMat.emissiveColor = new BABYLON.Color3(1, 0.8, 0.2);
  sun.material = sunMat;

  /* 지구 궤도 노드 */
  const earthOrbit = new BABYLON.TransformNode("earthOrbit", scene);

  /* 지구 */
  const earth = BABYLON.MeshBuilder.CreateSphere(
    "earth",
    { diameter: 2 },
    scene
  );
  earth.position.x = 12;
  earth.parent = earthOrbit;

  const earthMat = new BABYLON.StandardMaterial("earthMat", scene);
  earthMat.diffuseColor = new BABYLON.Color3(0.2, 0.4, 1);
  earth.material = earthMat;

  /* 달 궤도 노드 */
  const moonOrbit = new BABYLON.TransformNode("moonOrbit", scene);
  moonOrbit.parent = earth;

  /* 달 */
  const moon = BABYLON.MeshBuilder.CreateSphere(
    "moon",
    { diameter: 0.7 },
    scene
  );
  moon.position.x = 3;
  moon.parent = moonOrbit;

  const moonMat = new BABYLON.StandardMaterial("moonMat", scene);
  moonMat.diffuseColor = new BABYLON.Color3(0.8, 0.8, 0.8);
  moon.material = moonMat;

  /* 애니메이션 */
  scene.onBeforeRenderObservable.add(() => {
    earthOrbit.rotation.y += 0.002; // 지구 공전
    earth.rotation.y += 0.02;       // 지구 자전
    moonOrbit.rotation.y += 0.01;   // 달 공전
  });

  return scene;
};

const scene = createScene();

engine.runRenderLoop(() => {
  scene.render();
});

window.addEventListener("resize", () => {
  engine.resize();
});
</script>
</body>
</html>
